<!-- Mobile Overlay -->
@if (isOpen) {
  <div class="sidebar-overlay" (click)="onOverlayClick()"></div>
}

<div class="sidebar-container" [class.show]="isOpen">
  <!-- Brand Header -->
  <div class="sidebar-header p-3">
    <div class="d-flex align-items-center">
      <div class="logo-small me-2"></div>
      <span class="brand-text">CR Calculator</span>
    </div>
  </div>

  <!-- User Info -->
  @if (currentUser) {
    <div class="user-info p-3 text-center">
      <div class="user-avatar mx-auto mb-2">
        <span>{{ currentUser.name.charAt(0).toUpperCase() }}</span>
      </div>
      <h6 class="mb-0">Welcome, {{ currentUser.name }}</h6>
      <small class="text-muted">{{ currentUser.email }}</small>
    </div>
  }

  <!-- Navigation Links -->
  <nav class="sidebar-nav mt-3">
    <a routerLink="/dashboard" routerLinkActive="active" class="nav-link" (click)="onNavigate()">
      <i class="bi bi-speedometer2 me-2"></i>
      <span>Dashboard</span>
    </a>
    <a routerLink="/calculator" routerLinkActive="active" class="nav-link" (click)="onNavigate()">
      <i class="bi bi-calculator me-2"></i>
      <span>Calculator</span>
    </a>
    <a routerLink="/history" routerLinkActive="active" class="nav-link" (click)="onNavigate()">
      <i class="bi bi-clock-history me-2"></i>
      <span>History</span>
    </a>
    <a routerLink="/inventory" routerLinkActive="active" class="nav-link" (click)="onNavigate()">
      <i class="bi bi-box-seam me-2"></i>
      <span>Inventory</span>
    </a>
    <a routerLink="/profile" routerLinkActive="active" class="nav-link" (click)="onNavigate()">
      <i class="bi bi-person me-2"></i>
      <span>Profile</span>
    </a>
    <a routerLink="/subscription" routerLinkActive="active" class="nav-link" (click)="onNavigate()">
      <i class="bi bi-star me-2"></i>
      <span>Subscription</span>
    </a>
  </nav>

  <!-- Theme Toggle & Logout -->
  <div class="sidebar-footer p-3">
    <button class="btn btn-outline-secondary w-100 mb-2" (click)="toggleTheme()">
      @if (isDarkMode) {
        <i class="bi bi-sun me-2"></i>
        <span>Light Mode</span>
      }
      @if (!isDarkMode) {
        <i class="bi bi-moon me-2"></i>
        <span>Dark Mode</span>
      }
    </button>
    <button class="btn btn-danger w-100" (click)="logout()">
      <i class="bi bi-box-arrow-right me-2"></i>
      <span>Logout</span>
    </button>
  </div>
</div>
